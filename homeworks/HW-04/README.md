# HW-04

В четвертом домашнем задании необходимо добавить систему аутентификации и авторизации в созданный проект.

## Контекст:

Буквально день назад вы отправили первую итерацию проекта Марку по почте. 
Теперь можно со спокойной душой выдохнуть и пойти тратить свои законно полученные деньги. 
Однако при обналичивание чека к вам приходит еще одно письмо от Марка. 
Марк срочно требует реализации нового функционала и грозится аннулировать чек. 
Во вложениях вы опять видите файл с функциональными требованиями. 
С небольшой грустью вы возвращаетесь домой и снова садитесь писать код. 

## Функциональные требования:

Вам необходимо добавить механизм для регистрации, входа и проверки доступа пользователей. 

Список требований со стороны заказчика:

* В системе должна быть возможность зарегистрироваться некоторому пользователю по логину и паролю
* Логин пользователя должен быть уникален в контексте всей системы
* Пользователь должен иметь доступ ко всему функционалу только после входа в систему
* Пользователь должен уметь редактировать только свои публикации
* Необходимо хранить базовую информацию о пользователе: логин, пароль, имя, дата создания профиля

## Нефункциональные требования:

* Необходимо реализовать две _HTTP_ ручки
* Необходимо реализовать ручку регистрации, которая на вход принимает данные о пользователе
* В случае валидности данных, необходимо возвращать `StatusCode == 200`
* Необходимо реализовать ручку входа, которая на вход принимает логин и пароль
* В случае существования пользователя, необходимо возвращать **JWT token**
* Также необходимо при каждом запросе к основным ручкам проверять валидность токена
* При создании публикации необходимо также хранить автора публикации
* Обновлять публикацию может только ее автор
* При попытке обновить не свою публикацию необходимо возвращать `StatusCode == 403`
* В любом запросе, при передаче **JWT token**, в случае его не валидности нужно возвращать `StatusCode == 401`

## Что нужно сделать?

1. Нужно открыть ваш проект из прошлых ДЗ
2. Сделать отдельную ветку с названием `HW-4`
3. В отдельной ветке реализовать весь необходимый функционал
4. Сделать **_Pull Request_** в main ветку
5. Назначить меня в reviewers и скинуть ссылку в личные сообщения
6. Ждать

## Как сдавать домашнее задание?

* Загрузить код в ваш проект
* Сделать отдельный Pull Request

## Как будет оцениваться ДЗ?

* Необходимо придерживаться принципам [SOLID](https://habr.com/ru/companies/ruvds/articles/426413/) и использовать [слоистую архитектуру](https://alexkosarev.name/2018/07/27/n-tier-java-part1/)
* В данном ДЗ явно "_грязный код_" уже будет влиять на оценку. Я буду снижать до **3** баллов
* Соответственно за "_кое-как_" сделанный функционал можно будет получить максимум `5`
* За _чистый_ и красивый код можно будет получить максимум `8`
* На оценку `8+` необходимо будет вынести аутентификацию в отдельный [Plugin](https://ktor.io/docs/plugins.html)

## Дедлайн:

* Две недели с момента выдачи домашнего задание
* Лучше всего выполнить его немного заранее, чтобы я смог провести code-review и оставить комментарии
* Далее будут применяться понижающие коэффициенты

## Дополнительно:

* На дополнительную оценку можно реализовать систему аутентификации/авторизации с помощью двух токенов: `refresh token` и `access token`
* Любые вопросы приветствуются